{% extends "layout.html" %}

{% block title %}to do{% endblock %}


{% macro draw_task(task) %}
	{% if task['completed'] %}
							<div id='task-{{ task["id"] }}' class='task completed'>
								<input type='checkbox' checked />
	{% else %}
							<div id='task-{{ task["id"] }}' class='task'>
								<input type='checkbox' />
	{% endif %}
								<a class='delete control' href='#'>&#xd7;</a>
								<a class='notetoggle control' href='#'>{% if task['notes'] %}&ndash;{% else %}+{% endif %}</a>
								<span class='tasktitle'>{{ task['title'] }}</span>
	{% if task['notes'] %}
								<span class='tasknotes'>{{ task['notes'] }}</span>
	{% endif %}
							</div>
	{% if task['children'] %}
							<ul>
		{% for child in task['children'] %}
								<li>
			{{ draw_task(child) }}
								</li>
		{% endfor %}
							</ul>
	{% endif %}
{% endmacro %}


{% block content %}
		<h1 class='center'>to do.</h1>
		<h2 class='center'>cross 'em out.</h2>
		<div class='taskmain'>
			<div class='tasknav'>
				<div class='buttons'>
					<a class='prev' href='#'>prev</a>
					<a class='next' href='#'>next</a>
				</div>
			</div>
			<div class='tasklist-view'>
				<div class='tasklists'>
{% for tasklist in lists %}
					<div id='tasklist-{{ tasklist["id"] }}' class='tasklist'>
						<div class='backg'></div>
						<h2>{{ tasklist['title'] }}
							<a class='add' href='#'>add</a>
						</h2>
						<ul>
	{% for task in tasklist['items'] %}
							<li>
						{{ draw_task(task) }}
							</li>
	{% endfor %}
						</ul>
					</div>
{% endfor %}
				</div>
			</div>
		</div>
{% endblock %}